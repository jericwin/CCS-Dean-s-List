<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Announcements | CCS Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<link rel="shortcut icon" href="{{ url_for('static', filename='logo.png') }}" type="image/png">
<style>
:root {
    --maroon: #6A1B1B;
    --dark-gray: #121212;
    --orange: #FF7A1A;
    --dark-bg: #1E1B1B;
    --light-bg: #2A2323;
    --text-light: #F1E9E6;
    --text-muted: #B8AFAF;
}

/* Reset */
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family:'Inter', sans-serif;
    background: var(--dark-bg);
    color: var(--text-light);
    display:flex;
    height:100vh;
    overflow:hidden;
}

/* Sidebar */
.sidebar {
    width:260px;
    background: var(--dark-gray);
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    padding:20px 0;
    position:fixed;
    top:0; left:0; bottom:0;
}
.sidebar h2 {
    text-align:center;
    font-weight:700;
    font-size:22px;
    color:white;
    margin-bottom:30px;
}
.nav-links {
    flex:1;
}
.nav-links a {
    display:flex;
    align-items:center;
    gap:12px;
    color:#fff;
    padding:14px 22px;
    margin:8px 15px;
    text-decoration:none;
    font-weight:500;
    border-radius:10px;
    transition: all 0.3s ease;
}
.nav-links a i { font-size:18px; }
.nav-links a:hover {
    background: var(--orange);
    color:white;
}

/* User dropdown */
.user-menu {
    padding:15px;
    text-align:center;
}
.user-box {
    background: var(--light-bg);
    padding:12px;
    border-radius:12px;
    color:white;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
}
.user-box i { font-size:20px; }
.dropdown {
    display:none;
    margin-top:10px;
    background: var(--light-bg);
    border-radius:10px;
    overflow:hidden;
}
.dropdown a {
    display:block;
    padding:10px;
    color: var(--text-light);
    text-decoration:none;
    transition:0.3s;
}
.dropdown a:hover { background: var(--orange); color:white; }

/* Content */
.content {
    margin-left:260px;
    padding:30px;
    flex:1;
    overflow-y:auto;
}
.content h1 {
    font-size:24px;
    color: var(--orange);
    margin-bottom:20px;
}
.announcement-card {
    background: var(--light-bg);
    border-radius:16px;
    padding:20px;
    margin-bottom:20px;
    box-shadow:0 4px 12px rgba(0,0,0,0.4);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.announcement-card:hover {
    transform: translateY(-5px);
    box-shadow:0 10px 25px rgba(0,0,0,0.6);
}
.announcement-card h3 {
    margin-bottom:8px;
    color: var(--orange);
}
.announcement-card p {
    margin-bottom:12px;
}
.announcement-card img {
    max-width:100%;
    border-radius:10px;
    margin:10px 0;
}
.announcement-card small {
    display:block;
    margin-top:8px;
    color: var(--text-muted);
    font-size:13px;
}

/* Scrollbar */
::-webkit-scrollbar { width:8px; }
::-webkit-scrollbar-track { background: #2A2323; }
::-webkit-scrollbar-thumb { background: var(--orange); border-radius:10px; }

@media screen and (max-width:768px) {
    .sidebar { width:200px; }
    .content { margin-left:200px; padding:20px; }
}
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <div>
        <h2>üê¶‚Äçüî• CCS Portal</h2>
        <div class="nav-links">
            <a href="{{ url_for('student_module') }}"><i class="fas fa-home"></i> Dashboard</a>
            <a href="{{ url_for('student_announcements') }}"><i class="fas fa-bullhorn"></i> Announcements</a>
            <a href="{{ url_for('student_notifications') }}"><i class="fas fa-bell"></i> Notifications</a>
            <a href="{{ url_for('student_chat') }}"><i class="fas fa-headset"></i> Chat Support</a>
            <a href="{{ url_for('student_deans_list') }}"><i class="fas fa-award"></i> Dean‚Äôs List</a>
            <a href="{{ url_for('student_feedback') }}"><i class="fas fa-comment-dots"></i> Feedback</a>
        </div>
    </div>
    <div class="user-menu">
    <div class="user-box" id="userBox">
        <i class="fas fa-user-circle"></i> <span>{{ first_name }}</span>
    </div>
    <div class="dropdown" id="dropdownMenu">
        <!-- Settings link without any checks -->
        <a href="{{ url_for('student_settings') }}">Settings</a>
        <!-- Logout link (optional) -->
        <a href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
</div>
</div>

<!-- Main Content -->
<div class="content">
    <h1>Announcements</h1>

    {% for ann in announcements %}
    <div class="announcement-card">
        <h3>{{ ann.title }}</h3>
        <p>{{ ann.body }}</p>
        {% if ann.image_path %}
            <img src="{{ url_for('static', filename=ann.image_path.split('static/')[-1]) }}">
        {% endif %}
        <small><i class="fas fa-clock"></i> Posted at: {{ ann.created_at }}</small>
    </div>
    {% endfor %}
</div>

<script>
const userBox = document.getElementById('userBox');
const dropdownMenu = document.getElementById('dropdownMenu');
userBox.onclick = () => dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
window.onclick = e => { if(!userBox.contains(e.target)){ dropdownMenu.style.display = "none"; } }
</script>
</body>
</html>
